PHASE 1 RIG CONFIGURATION
=========================

Based on Technical Directive from Brian and Kalpesh's Specifications


COORDINATE SYSTEM ALIGNMENT
---------------------------

Per Kalpesh's confirmation:
- X-axis: FLIPPED (video captures produce mirrored data)
- Z-axis: Forward (toward camera)
- Y-axis: Up

Implementation:
- All X coordinates are negated before processing
- Video frames are horizontally flipped to match
- This ensures racket face orientation aligns with Unity rig


PRIMARY ANCHOR (Right Hand)
---------------------------

Configuration:
- Grip Style: Continental (Two-handed backhand, bottom hand)
- Wrist-to-Handle Offset: (0.1, 0, 0.03) meters - PARAMETERIZED
- Wrist-to-Face-Center: ~0.55 meters

Notes from Kalpesh:
"Offsets need to be parameterized. This depends on the racket model's Z-forward. 
Parameterizing this will also enable us to model various grip styles."

Our Implementation:
- GripConfig dataclass with adjustable parameters
- Supports Continental, Eastern, Semi-Western, Western grips
- Racket locked to right wrist joint as primary anchor


SECONDARY ANCHOR (Left Hand)
----------------------------

Decision: NOT MAPPED

Rationale from Kalpesh:
"Noise in the data would create contradiction with the primary anchor. 
We should just let the inference data take over the secondary anchor, 
because it doesn't provide additional information about the dynamics of the racket."

Our Implementation:
- Left hand tracked for visualization only
- Does NOT influence racket pose calculation
- Avoids jitter from conflicting hand positions


PARAMETERIZED GRIP OFFSETS
--------------------------

Location: src/unity_config.py

GRIP_STYLES dictionary supports:
- continental
- eastern_forehand
- semi_western
- western
- eastern_backhand
- two_handed_backhand_right

Each grip defines:
- wrist_to_handle: (x, y, z) offset in meters
- wrist_to_face_center: distance in meters
- grip_rotation_euler: (rx, ry, rz) rotation in degrees


MONDAY DELIVERABLE
------------------

Goal: "Racket staying perfectly seated in the Right Hand throughout the 
backhand motion, with the Left Hand following the handle accurately."

Approach:
1. Right hand = Primary anchor (racket locked)
2. Left hand = Visual only (follows data, no racket constraint)
3. X-axis flip applied to all data
4. Parameterized grip allows Unity team to fine-tune

Output Format:
- Quaternion orientation for racket
- Position in Unity coordinate space
- Ready for ZeroMQ integration with Kalpesh


NEXT STEPS
----------

1. Kalpesh to confirm racket model origin in Unity
2. Fine-tune grip offsets after Unity integration test
3. Validate sub-2 degree accuracy on backhand clips

